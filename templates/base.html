<!Doctype html>
<html lang="en">
{% load static %}

<head>
    <title>Ways 101</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
</head>

<body id="body" style="height: 100%; background-position: center; background-repeat: no-repeat; background-attachment: fixed; background-size: cover; background-image: url('{% static 'bg.jpg' %}');">

    <!-- Background Video -->

    <!-- <video autoplay muted loop class="w-100 position-absolute" style="z-index: -100;">
        <source src="{% static '/bg2.mp4' %}" type="video/mp4">
    </video> -->

    <!-- Navbar -->

    <nav class="navbar navbar-expand-lg navbar-dark bg-dark" style="height: 10vh;">

        <div class="w-100 d-flex flex-fill justify-content-between align-items-center ps-2 ps-sm-4 me-3 me-sm-4 pe-sm-3">

            <!-- <div class="navbar-brand"> -->
            <!-- Ways 101 -->
            <!-- {% load static %} <img src="{% static "/App/media/logoway.png" %}" alt="Ways 101"> -->

            <div class="w-25">
                <!-- For Large screen width -->
                <img src="{% static '/logoway.png' %}" alt="Ways 101" style="color: white;" class="w-25 d-none d-lg-block">
                <!-- For Medium screen width -->
                <img src="{% static '/logoway.png' %}" alt="Ways 101" style="color: white;" class="w-50 d-none d-md-block d-lg-none">
                <!-- For Small screen width -->
                <img src="{% static '/logoway.png' %}" alt="Ways 101" style="color: white;" class="w-75 d-none d-sm-block d-md-none d-lg-none">
                <!-- For Extra small screen width -->
                <img src="{% static '/logoway.png' %}" alt="Ways 101" style="color: white;" class="w-100 d-sm-none">
            </div>

            <!-- For Extra small screen width -->
            <div class="d-block d-sm-none text-light w-25 fw-bold" style="font-size: 1.2rem;">Ways 101</div>

            <!-- For Other screen widths -->
            <div class="d-none d-sm-block text-light w-25 fw-bold" style="font-size: 1.5rem;">Ways 101</div>

            {% if user is not None %}
            <div class="dropdown w-auto">
                <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="fa-solid fa-gear me-2"></i>Settings
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                    <li class="text-dark">
                        <button class="dropdown-item" onclick="location.href='/login/profile/{{user}}'"><i class="fa-solid fa-user text-dark pe-2"></i>Profile</button>
                    </li>
                    <li class="text-dark">
                        <button class="dropdown-item" onclick="location.href='/login/{{user}}'"><i class="fa-sharp fa-solid fa-house text-dark pe-2"></i>Home</button>
                    </li>
                    <li class="text-dark">
                        <button class="dropdown-item" onclick="location.href='/logout/'"><i class="fa-sharp fa-solid fa-arrow-right-from-bracket text-dark pe-2" style="color: white;"></i>Log out</button>
                    </li>
                </ul>
            </div>
            {% else %}
            <div class="w-auto">
                <button type="button" class="btn btn-secondary text-warning me-2" onclick="location.href = '/signup/'">Sign Up</button>
                <button type="button" class="btn btn-warning text-secondary" onclick="location.href = '/login/'">Log In</button>
            </div> {% endif %}

        </div>
    </nav>

    <!-- Heading -->

    <h1 class="text-center mt-5 mb-3 fw-bolder">101 ways to</h1>

    <!-- Adding  Form -->

    <div class="d-flex flex-column justify-content-center align-items-center mt-5 mb-5">

        <button class="btn btn-dark rounded-pill" type="button" data-bs-toggle="collapse" data-bs-target="#collapseForm" aria-expanded="false" aria-controls="collapseForm" {% if user is None %} onclick="location.href = '/login'" {% endif %}>ADD YOUR WAY</button>

        <div class="w-100 collapse" id="collapseForm">
            <div class="w-100 d-flex justify-content-center">

                <!-- For Extra small screen width -->
                <form class="d-flex d-md-none flex-column justify-content-around text-center mt-5 p-4 bg-light border border-secondary shadow" style="border-radius: 20px; width: 80%;" {% if user is not None %} action="../addway/{{user}}/" {% endif %} method="POST">{% csrf_token %}
                    <div class="mb-4">
                        <label for="way" class="form-label">Your way: </label>
                        <input type="text" class="form-control" id="way" placeholder="Your way" name="content" required="True" />
                    </div>
                    <button type="submit" class="btn btn-dark">Submit</button>
                </form>

                <!-- For Other screen width -->
                <form class="w-50 d-none d-md-flex flex-column justify-content-around text-center mt-5 p-4 bg-light border border-secondary shadow" style="border-radius: 20px;" {% if user is not None %} action="../addway/{{user}}/" {% endif %} method="POST">{% csrf_token %}
                    <div class="mb-4">
                        <label for="way" class="form-label">Your way: </label>
                        <input type="text" class="form-control" id="way" placeholder="Your way" name="content" required="True" />
                    </div>
                    <button type="submit" class="btn btn-dark">Submit</button>
                </form>

            </div>
        </div>

    </div>

    <!-- List of ways -->

    <div class="w-100 d-flex flex-column justify-content-center align-items-center">

        <ul class="d-flex flex-column justify-content-center list-group" style="width: 90%;">
            {% for way in way_list %}
            <li class="w-100 list-group-item border-0 bg-transparent d-flex">

                <div class="w-auto d-flex justify-content-start align-items-center me-2">
                    <button class="btn btn-dark rounded-circle text-warning" type="button" data-bs-toggle="collapse" data-bs-target="#Comment{{way.id}}" aria-expanded="false" aria-controls="Comment{{way.id}}"><i class="text-start fa-solid fa-comment fa-2x"></i></button>
                </div>

                <div class="w-100 d-flex flex-column align-items-center justify-content-evenly border border-2 border-success p-3" style="border-radius: 50px;">
                    <div class="fw-bold text-break text-wrap pb-2">{{way.content}}</div>
                    <div class="fst-italic">By: {{way.author}}</div>
                </div>

                <div class="w-auto d-flex justify-content-end align-items-center">
                    {% if user is None %}
                    <div class="ms-2">

                        <button class="border-0 m-0 p-0 d-flex flex-column flex-sm-row align-items-center bg-transparent" style="background-color: white;" onclick="location.href='/login/'">
                            <i class="text-end fa-regular fa-thumbs-up fa-2x me-1"></i>
                            <span class="text-muted align-self-center text-nowrap" style="font-size: 0.8rem;">{{way.numberofupvotes}} upvotes  </span>
                        </button>

                        <button class="border-0 m-0 p-0 d-flex flex-column flex-sm-row align-items-center bg-transparent" style="background-color: white;" onclick="location.href='/login/'">
                            <i class="text-end fa-regular fa-thumbs-down fa-2x me-3 me-sm-1"></i>
                            <span class="text-muted align-self-center text-nowrap" style="font-size: 0.8rem;">{{way.numberofdownvotes}} downvotes</span>
                        </button>

                    </div>
                    {% else %} {% if user.username in way.up %}
                    <div class="ms-2">
                        <div class="d-flex flex-column flex-sm-row align-items-center">
                            <i class="text-end fa-solid fa-thumbs-up fa-2x me-1" onclick="location.href = '/login/unupvote/{{user}}/{{way.id}}'"></i>
                            <span class="text-muted align-self-center text-nowrap" style="font-size: 0.8rem;">{{way.numberofupvotes}} upvotes  </span>
                        </div>
                        <div class="d-flex flex-column flex-sm-row align-items-center">
                            <i class="text-end fa-regular fa-thumbs-down fa-2x me-1" onclick="location.href = '/login/downvote/{{user}}/{{way.id}}'"></i>
                            <span class="text-muted align-self-center text-nowrap" style="font-size: 0.8rem;">{{way.numberofdownvotes}} downvotes</span>
                        </div>
                    </div>
                    {% elif user.username in way.down %}
                    <div class="ms-2">
                        <div class="d-flex flex-column flex-sm-row align-items-center">
                            <i class="text-end fa-regular fa-thumbs-up fa-2x me-1" onclick="location.href = '/login/upvote/{{user}}/{{way.id}}'"></i>
                            <span class="text-muted align-self-center" style="font-size: 0.8rem;">{{way.numberofupvotes}} upvotes</span>
                        </div>
                        <div class="d-flex flex-column flex-sm-row align-items-center">
                            <i class="text-end fa-solid fa-thumbs-down fa-2x me-1" onclick="location.href = '/login/undownvote/{{user}}/{{way.id}}'"></i>
                            <span class="text-muted align-self-center text-nowrap" style="font-size: 0.8rem;">{{way.numberofdownvotes}} downvotes</span>
                        </div>
                    </div>
                    {% else %}
                    <div class="ms-2">
                        <div class="d-flex flex-column flex-sm-row align-items-center">
                            <i class="text-end fa-regular fa-thumbs-up fa-2x me-1" onclick="location.href = '/login/upvote/{{user}}/{{way.id}}'"></i>
                            <span class="text-muted align-self-center text-nowrap" style="font-size: 0.8rem;">{{way.numberofupvotes}} upvotes</span>
                        </div>
                        <div class="d-flex flex-column flex-sm-row align-items-center">
                            <i class="text-end fa-regular fa-thumbs-down fa-2x me-1" onclick="location.href = '/login/downvote/{{user}}/{{way.id}}'"></i>
                            <span class="text-muted align-self-center text-nowrap" style="font-size: 0.8rem;">{{way.numberofdownvotes}} downvotes</span>
                        </div>
                    </div>
                    {% endif %} {% endif %}
                </div>

            </li>

            <!-- Comments -->
            <div class="collapse" id="Comment{{way.id}}">

                <div class="w-100 d-flex justify-content-center align-items-center">

                    <div class="w-75 d-flex flex-column justify-content-center p-2">

                        {% if user is None %}
                        <button class="btn btn-dark rounded-pill text-warning" type="button" disabled="true"><i class="fa-solid fa-square-plus"></i></button> {% else %}
                        <button class="btn btn-dark rounded-pill text-warning" type="button" data-bs-toggle="collapse" data-bs-target="#CommentForm{{way.id}}" aria-expanded="false" aria-controls="CommentForm{{way.id}}"><i class="fa-solid fa-square-plus"></i></button>                        {% endif %}
                        <div class="collapse m-2" id="CommentForm{{way.id}}">

                            <form class="d-flex flex-column justify-content-around text-center mt-1" action="../comment/{{user}}/{{way.id}}" method="POST">
                                {% csrf_token %}
                                <div class="mb-1">
                                    <textarea cols="10" rows="5" type="text" class="form-control" id="comment" placeholder="Your Comment" name="comment" required="True"></textarea>
                                </div>
                                <button type="submit" class="btn btn-dark">Add comment</button>
                            </form>

                        </div>

                        <!-- Other commments -->

                        <div class="bg-light p-3 mt-2 d-flex flex-column align-items-center justify-content-evenly" style="border-radius: 25px;">
                            {% for comment in comments %} {% if way == comment.way %}
                            <div class="w-100 d-flex ps-4 pe-4 pt-3 pb-3 m-2 shadow" style="border-radius: 15px; border: 2px solid black;">

                                <!-- For Extra small screen width -->
                                <div class="d-flex d-sm-none flex-column align-items-start" id="profile{{comment.id}}" style="width: 40%;">

                                    {% if comment.author.profileImg == 1 %}
                                    <img src="{% static '/1x/Asset1.png' %}" alt="profileimg" class="w-75"> {% elif comment.author.profileImg == 2 %}
                                    <img src="{% static '/1x/Asset2.png' %}" alt="profileimg" class="w-75"> {% elif comment.author.profileImg == 3 %}
                                    <img src="{% static '/1x/Asset3.png' %}" alt="profileimg" class="w-75"> {% elif comment.author.profileImg == 4 %}
                                    <img src="{% static '/1x/Asset4.png' %}" alt="profileimg" class="w-75"> {% elif comment.author.profileImg == 5 %}
                                    <img src="{% static '/1x/Asset5.png' %}" alt="profileimg" class="w-75"> {% else %}
                                    <img src="{% static '/1x/Asset6.png' %}" alt="profileimg" class="w-75"> {% endif %}

                                </div>

                                <!-- For Small screen width -->
                                <div class="d-none d-sm-flex d-md-none flex-column align-items-start" id="profile{{comment.id}}" style="width: 20%;">

                                    {% if comment.author.profileImg == 1 %}
                                    <img src="{% static '/1x/Asset1.png' %}" alt="profileimg" class="w-75"> {% elif comment.author.profileImg == 2 %}
                                    <img src="{% static '/1x/Asset2.png' %}" alt="profileimg" class="w-75"> {% elif comment.author.profileImg == 3 %}
                                    <img src="{% static '/1x/Asset3.png' %}" alt="profileimg" class="w-75"> {% elif comment.author.profileImg == 4 %}
                                    <img src="{% static '/1x/Asset4.png' %}" alt="profileimg" class="w-75"> {% elif comment.author.profileImg == 5 %}
                                    <img src="{% static '/1x/Asset5.png' %}" alt="profileimg" class="w-75"> {% else %}
                                    <img src="{% static '/1x/Asset6.png' %}" alt="profileimg" class="w-75"> {% endif %}

                                </div>

                                <!-- For Other screen width -->
                                <div class="d-none d-md-flex flex-column align-items-start" id="profile{{comment.id}}" style="width: 10%;">

                                    {% if comment.author.profileImg == 1 %}
                                    <img src="{% static '/1x/Asset1.png' %}" alt="profileimg" class="w-75"> {% elif comment.author.profileImg == 2 %}
                                    <img src="{% static '/1x/Asset2.png' %}" alt="profileimg" class="w-75"> {% elif comment.author.profileImg == 3 %}
                                    <img src="{% static '/1x/Asset3.png' %}" alt="profileimg" class="w-75"> {% elif comment.author.profileImg == 4 %}
                                    <img src="{% static '/1x/Asset4.png' %}" alt="profileimg" class="w-75"> {% elif comment.author.profileImg == 5 %}
                                    <img src="{% static '/1x/Asset5.png' %}" alt="profileimg" class="w-75"> {% else %}
                                    <img src="{% static '/1x/Asset6.png' %}" alt="profileimg" class="w-75"> {% endif %}

                                </div>

                                <!-- Same for all screen widths -->
                                <div class="w-100 d-flex flex-column align-items-start justify-content-evenly" id="comment{{comment.id}}">
                                    <div class="fw-bold border-bottom border-2 border-warning">{{comment.author}}</div>
                                    <div class="text-break text-wrap">{{comment.comment}}</div>
                                </div>

                                {% if user.is_staff %}
                                <!-- Button trigger Delete Comment modal -->
                                <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteCommentModal">Delete Comment</button>

                                <!-- Delete Comment Modal -->
                                <div class="modal fade" id="deleteCommentModal" tabindex="-1" aria-labelledby="deleteCommentModalLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                        <div class="modal-content">

                                            <div class="modal-header">
                                                <h5 class="modal-title" id="deleteCommentModalLabel">Comment Deletion</h5>
                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                            </div>

                                            <div class="modal-body">
                                                <div class="fw-bolder fst-italic mb-3">Are you sure you want to delete:</div>
                                                <div class="w-100 d-flex ps-4 pe-4 pt-3 pb-3 shadow" style="border-radius: 15px; border: 2px solid black;">
                                                    <!-- For Extra small screen width -->
                                                    <div class="d-flex d-sm-none flex-column align-items-start" id="profile{{comment.id}}" style="width: 40%;">

                                                        {% if comment.author.profileImg == 1 %}
                                                        <img src="{% static '/1x/Asset1.png' %}" alt="profileimg" class="w-75"> {% elif comment.author.profileImg == 2 %}
                                                        <img src="{% static '/1x/Asset2.png' %}" alt="profileimg" class="w-75"> {% elif comment.author.profileImg == 3 %}
                                                        <img src="{% static '/1x/Asset3.png' %}" alt="profileimg" class="w-75"> {% elif comment.author.profileImg == 4 %}
                                                        <img src="{% static '/1x/Asset4.png' %}" alt="profileimg" class="w-75"> {% elif comment.author.profileImg == 5 %}
                                                        <img src="{% static '/1x/Asset5.png' %}" alt="profileimg" class="w-75"> {% else %}
                                                        <img src="{% static '/1x/Asset6.png' %}" alt="profileimg" class="w-75"> {% endif %}

                                                    </div>

                                                    <!-- For Small screen width -->
                                                    <div class="d-none d-sm-flex d-md-none flex-column align-items-start" id="profile{{comment.id}}" style="width: 20%;">

                                                        {% if comment.author.profileImg == 1 %}
                                                        <img src="{% static '/1x/Asset1.png' %}" alt="profileimg" class="w-75"> {% elif comment.author.profileImg == 2 %}
                                                        <img src="{% static '/1x/Asset2.png' %}" alt="profileimg" class="w-75"> {% elif comment.author.profileImg == 3 %}
                                                        <img src="{% static '/1x/Asset3.png' %}" alt="profileimg" class="w-75"> {% elif comment.author.profileImg == 4 %}
                                                        <img src="{% static '/1x/Asset4.png' %}" alt="profileimg" class="w-75"> {% elif comment.author.profileImg == 5 %}
                                                        <img src="{% static '/1x/Asset5.png' %}" alt="profileimg" class="w-75"> {% else %}
                                                        <img src="{% static '/1x/Asset6.png' %}" alt="profileimg" class="w-75"> {% endif %}

                                                    </div>

                                                    <!-- For Other screen width -->
                                                    <div class="d-none d-md-flex flex-column align-items-start" id="profile{{comment.id}}" style="width: 10%;">

                                                        {% if comment.author.profileImg == 1 %}
                                                        <img src="{% static '/1x/Asset1.png' %}" alt="profileimg" class="w-75"> {% elif comment.author.profileImg == 2 %}
                                                        <img src="{% static '/1x/Asset2.png' %}" alt="profileimg" class="w-75"> {% elif comment.author.profileImg == 3 %}
                                                        <img src="{% static '/1x/Asset3.png' %}" alt="profileimg" class="w-75"> {% elif comment.author.profileImg == 4 %}
                                                        <img src="{% static '/1x/Asset4.png' %}" alt="profileimg" class="w-75"> {% elif comment.author.profileImg == 5 %}
                                                        <img src="{% static '/1x/Asset5.png' %}" alt="profileimg" class="w-75"> {% else %}
                                                        <img src="{% static '/1x/Asset6.png' %}" alt="profileimg" class="w-75"> {% endif %}

                                                    </div>

                                                    <!-- Same for all screen widths -->
                                                    <div class="w-100 d-flex flex-column align-items-start justify-content-evenly" id="comment{{comment.id}}">
                                                        <div class="fw-bold border-bottom border-2 border-warning">{{comment.author}}</div>
                                                        <div class="text-break text-wrap">{{comment.comment}}</div>
                                                    </div>

                                                </div>
                                            </div>

                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                                <button type="button" class="btn btn-danger" onclick="location.href='/login/deleteComment/{{user}}/{{comment.id}}'">Delete Comment</button>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                                {% endif %}

                            </div>
                            {% endif %} {% endfor %}
                        </div>

                    </div>

                </div>

            </div>

            {% if user.is_staff %}
            <!-- Button trigger Delete Way modal -->
            <button type="button" class="btn btn-danger mb-4 w-50 align-self-center" data-bs-toggle="modal" data-bs-target="#deleteWayModal">Delete Way</button>

            <!-- Delete Way Modal -->
            <div class="modal fade" id="deleteWayModal" tabindex="-1" aria-labelledby="deleteWayModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">

                        <div class="modal-header">
                            <h5 class="modal-title" id="deleteWayModalLabel">Way Deletion</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>

                        <div class="modal-body">
                            <div class="fw-bolder fst-italic mb-3">Are you sure you want to delete:</div>
                            <div class="w-100 d-flex flex-column align-items-center justify-content-evenly border border-2 border-success p-3" style="border-radius: 50px;">
                                <div class="fw-bold text-break text-wrap pb-2">{{way.content}}</div>
                                <div class="fst-italic">By: {{way.author}}</div>
                            </div>
                        </div>

                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-danger" onclick="location.href='/login/deleteWay/{{user}}/{{way.id}}'">Delete Way</button>
                        </div>

                    </div>
                </div>
            </div>
            {% endif %} {% endfor %}

        </ul>

    </div>

    <!-- Footer -->

    <div class="bg-dark mt-5 d-flex align-items-center justify-content-around " style="height: 200px; color: white; ">
        <div class="w-50 border-end border-warning text-center p-3 ">Footer</div>
        <div class="w-50 text-center p-3 ">Credits: @ AtomicFrost1370 and Entrance Leader</div>
    </div>

    <!-- Scripts for boostrap -->

    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js " integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM " crossorigin="anonymous "></script> -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js " integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p " crossorigin="anonymous "></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js " integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF " crossorigin="anonymous "></script>

    <!-- Script for background animation -->

    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r121/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.fog.min.js"></script>
    <script>
        var setVanta = () => {
            if (window.VANTA) window.VANTA.FOG({
                el: "#body",
                mouseControls: true,
                touchControls: true,
                gyroControls: false,
                minHeight: 200.00,
                minWidth: 200.00
            })
        }
        _strk.push(function() {
            setVanta()
            window.edit_page.Event.subscribe("Page.beforeNewOneFadeIn", setVanta)
        })
    </script> -->

    <!-- <script src="three.r134.min.js"></script>
    <script src="vanta.fog.min.js"></script>
    <script>
        VANTA.FOG({
            el: "#body",
            mouseControls: true,
            touchControls: true,
            gyroControls: false,
            minHeight: 200.00,
            minWidth: 200.00
        })
    </script> -->

</body>

</html>